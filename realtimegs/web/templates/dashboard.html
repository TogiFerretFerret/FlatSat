<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARTEMIS SWARM :: NODE 01</title>
    <style>
        body { background: #0b0b0b; color: #00ff41; font-family: 'Courier New', monospace; padding: 20px; }
        .grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        .panel { background: #111; border: 1px solid #333; padding: 15px; }
        h2 { border-left: 4px solid #00ff41; padding-left: 10px; margin-top: 0; background: #002200; }
        img { width: 100%; border: 1px solid #444; }
        .data-row { display: flex; justify-content: space-between; margin-bottom: 5px; border-bottom: 1px dotted #333; }
        .btn { width: 100%; background: #00ff41; color: #000; border: none; padding: 15px; font-weight: bold; cursor: pointer; margin-top: 20px; font-size: 1.1em;}
        .btn:active { background: #fff; }
    </style>
</head>
<body>
    <h1>ARTEMIS SWARM // NODE 01</h1>
    <div class="grid">
        <div class="panel">
            <h2>OPTICAL FEED</h2>
            <img src="/video_feed" alt="Connecting..." />
        </div>
        <div class="panel">
            <h2>TELEMETRY</h2>
            
            <h3>ORIENTATION (EULER)</h3>
            <div class="data-row"><span>ROLL:</span> <span id="roll">0.0</span></div>
            <div class="data-row"><span>PITCH:</span> <span id="pitch">0.0</span></div>
            <div class="data-row"><span>YAW:</span> <span id="yaw">0.0</span></div>

            <h3>ACCELERATION (M/S^2)</h3>
            <div class="data-row"><span>X:</span> <span id="ax">0.0</span></div>
            <div class="data-row"><span>Y:</span> <span id="ay">0.0</span></div>
            <div class="data-row"><span>Z:</span> <span id="az">0.0</span></div>
            
            <button class="btn" onclick="capture()">MANUAL CAPTURE</button>
            <div id="log" style="margin-top: 10px; color: #888; font-size: 0.8em;">System Ready.</div>
        </div>
    </div>
    <script>
        async function update() {
            try {
                let res = await fetch('/telemetry');
                let d = await res.json();
                
                document.getElementById('roll').innerText = d.orientation_euler.roll.toFixed(1);
                document.getElementById('pitch').innerText = d.orientation_euler.pitch.toFixed(1);
                document.getElementById('yaw').innerText = d.orientation_euler.yaw.toFixed(1);
                
                document.getElementById('ax').innerText = d.accel.x.toFixed(2);
                document.getElementById('ay').innerText = d.accel.y.toFixed(2);
                document.getElementById('az').innerText = d.accel.z.toFixed(2);
            } catch(e) {}
        }
        
        async function capture() {
            document.getElementById('log').innerText = "Capturing...";
            let res = await fetch('/capture');
            let d = await res.json();
            document.getElementById('log').innerText = d.status === "captured" ? "Saved: " + d.file : "Error";
        }
        
        setInterval(update, 100);
    </script>
</body>
</html>
